<!DOCTYPE html>
<html lang="zh">

<head resource>
  <include file="inc/meta.inc" />
  <title>登录</title>
</head>

<body>
  <div id="vapp" v-cloak>
    <login ref="login" @success="successful" v-show="false"></login>
    <!-- 错误提示框 -->
    <div v-if="!checked" class="box noexist">
      <div>
        <warning large>登录操作存在错误</warning>
      </div>
      <div class="context">
        可能的原因：<br />
        <alert medium>{{error}}</alert>
      </div>
      <div>
        <el-button type="primary" plain @click="window.location.href='/'">
          <icon>&#xa020</icon>返回系统首页
        </el-button>
        <el-button type="warning" plain @click="()=>{window.opener=null;window.open('','_self');window.close();}">
          <icon>&#xe72c</icon>关闭当前窗体
        </el-button>
      </div>
    </div>
    <!-- 登录中的提示框-->
    <div v-if="checked" class="box progress">
      <div>
        <icon>&#xa035</icon>来自 “{{getreferrer()}}” 的登录
      </div>
      <div class="context">
        <template v-if="loading_income">
          <div loading="p4"></div>
          <br/><br/>
          <loading>正在处理...</loading>
        </template>
        <div v-else-if="error!=''">
          <icon>&#xe774</icon>{{error}}
        </div>
      </div>
      <div v-show="!loading && error!=''">
        <el-button type="primary" plain @click="window.location.href='/'">
          <icon>&#xa020</icon>返回系统首页
        </el-button>
        <el-button type="warning" plain @click="()=>{window.opener=null;window.open('','_self');window.close();}">
          <icon>&#xe72c</icon>关闭当前窗体
        </el-button>
      </div>
    </div>
  </div>


</body>

</html>