<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>升级</title>
    <script type="text/javascript" src="/Utilities/Scripts/axios_min.js"></script>
    <script type="text/javascript" src="/Utilities/Scripts/vue.min.js"></script>
    <script type="text/javascript" src="/Utilities/Scripts/utils.js"></script>
    <script type="text/javascript" src="/Utilities/Scripts/api.js"></script>
    <link href="/Utilities/Fonts/icon.css" rel="stylesheet" type="text/css" />
    <link href="../Styles/Public.css" rel="stylesheet" type="text/css" />
    <link href="Styles/Upgrade.css" rel="stylesheet" type="text/css" />
</head>

<body>
    <div id="head">
        <h1>软件升级</h1>
    </div>
    <p>
        我们永久提供免费升级包，需要您自主升级，如果需要人工协助请联系: <span copyright="tel" icon="&#xa047"></span>
    </p>
    <p icon="&#xe69e">
        安装程序下载，云盘地址：
        <a copyright="download" target="_blank"><span copyright="download"></span></a>
    </p>

    <h2>升级大约分为几种情况</h2>
    <dl>
        <dt>1、仅程序升级，不涉及数据</dt>
        <dd>大部情况下是这种情况，只是修正或优化了程序，不涉及数据相关的问题。</dd>
        <dd>
            用新版本程序覆盖原来的程序即可，<b>注意db.config覆盖后修改里面的数据库链接</b>，不要覆盖数据库链接。
        </dd>
        <dd><alert>如果是社区版，SQLite数据库存放于/APP_Data文件夹，所以/APP_Data文件夹也不能覆盖。</alert></dd>
    </dl>
    <dl>
        <dt>2、升级涉及数据结构调整</dt>
        <dd>
            如果升级涉及数据相关，例如增删了一些表或字段，不仅要升级程序，还需要执行SQL升级脚本；相关升级脚本在云盘中“数据库升级脚本”文件夹中获取，或从源码库中获取
            <a copyright="gitee" target="_blank"><span copyright="gitee"></span></a>
        </dd>
        <dd>
            首先查看原有版本的<a href="/license" target="_blank">发布日期</a>，然后从原有版本的日期一直到当前要升级版本的所有SQl升级脚本，按时间顺序（从最早的开始）逐一执行。
        </dd>
    </dl>
    <dl>
        <dt>3、涉及管理菜单权限</dt>
        <dd>
            如果新增了一些管理模块，生成新的管理菜单项，在执行完升级脚本后，可能仍然无法显示。
        </dd>
        <dd>
            需要重新设置菜单使用权限，需要进入超管，在“机构”=>“机构等级”界页，设置当前机构所属机构等级的权限。
        </dd>
    </dl>
    <dl>
        <dt>4、升级涉及的数据结构有大幅调整</dt>
        <dd>例如从version 1.0 升级到version 2.0版本时，代码与数据库都有很大的调整。不仅要执行SQL升级脚本，可能还要执行一些特殊的代码。</dd>
        <dd>

            这种情况不多见，会单独编写详细的升级说明，并强烈建议申请人工协助。

        </dd>
    </dl>
    <h2>升级注意事项</h2>
    <dl>
        <dt>1、检查原有版本信息，确认升级内容</dt>
        <dd>
            打开站点/license页面，可以看到当前版本的发布时间。
        </dd>
    </dl>
    <dl>
        <dt>2、做好数据备份</dt>
        <dd>
            强烈建议升级之前做好数据备份。
        </dd>

    </dl>
    <h2>常见问题</h2>
    <dl>
        <dt>1、当用新版本程序覆盖原有程序时，提示“bin”文件夹里的某些dll文件被占用</dt>
        <dd>
            先停用站点，，应用程序池也禁用，覆盖完成后，再启用站点。
        </dd>

    </dl>
</body>

</html>